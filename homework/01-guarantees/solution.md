## At Most Once

Простая версия протокола передачи сообщений "не более одного раза" в распределенной системе.

### 1. AtMostOnceSender (Передатчик)
- **`__init__`**: Инициализация идентификаторов процесса и получателя, а также индекса сообщения.
- **`on_local_message`**: Отправляет сообщение получателю с уникальным индексом.

### 2. AtMostOnceReceiver (Получатель)
- **`__init__`**: Инициализация идентификатора процесса и буфера для отслеживания сообщений.
- **`on_message`**: При получении сообщения проверяется его уникальный индекс. Если сообщение не было ранее обработано, оно передается локальному пользователю.

### Итого:
Протокол гарантирует, что каждое сообщение было доставлено не более одного раза. Для достижения этой цели каждому сообщению мы присваиваем уникальный индекс, который затем проверяется на стороне получателя.

---

## At Least Once

Этот код реализует протокол передачи сообщений "как минимум один раз" в распределенной системе.

### 1. AtLeastOnceSender (Передатчик)
- **`__init__`**: Инициализация идентификаторов процесса и получателя, индекса сообщения и словаря отправленных сообщений.
- **`on_local_message`**: При получении локального сообщения для отправки, добавляет его в словарь отправленных и отсылает получателю. Затем устанавливает таймер для повторной отправки, если не получит подтверждения.
- **`on_message`**: При получении подтверждения о доставке, удаляет соответствующее сообщение из словаря отправленных.
- **`on_timer`**: При срабатывании таймера, проверяет, остались ли не подтвержденные сообщения и отправляет их снова.

### 2. AtLeastOnceReceiver (Получатель)
- **`__init__`**: Инициализация идентификатора процесса.
- **`on_message`**: При получении сообщения от передатчика, отправляет подтверждение о доставке обратно. Затем очищает ненужные данные и передает сообщение локальному пользователю.

### Итого:
Протокол гарантирует, что каждое сообщение будет доставлено по крайней мере один раз. Для достижения этой цели мы используем механизм подтверждений и повторной отправки сообщений в случае неполучения подтверждения.

---

## Exactly Once

Данный код реализует протокол передачи сообщений "ровно один раз" в распределенной системе.

### 1. ExactlyOnceSender (Передатчик)
- **`__init__`**: Инициализация идентификаторов процесса и получателя, индекса сообщения и словаря отправленных сообщений.
- **`on_local_message`**: При получении локального сообщения для отправки, добавляет его в словарь отправленных и отсылает получателю. Устанавливает таймер для возможности повторной отправки.
- **`on_message`**: При получении подтверждения о доставке, удаляет соответствующее сообщение из словаря отправленных.
- **`on_timer`**: Если сообщение не было подтверждено вовремя, передатчик повторно отправляет его.

### 2. ExactlyOnceReceiver (Получатель)
- **`__init__`**: Инициализация идентификатора процесса и буфера для хранения статуса обработанных сообщений.
- **`on_message`**: При получении сообщения от передатчика, отправляет подтверждение о доставке обратно. Если сообщение еще не было обработано, оно передается локальному пользователю.

### Итого:
Протокол гарантирует, что каждое сообщение будет обработано получателем только один раз, несмотря на возможные повторные отправки от передатчика. Для этого мы используем механизм подтверждений и механизм для отслеживания обработанных сообщений.

---

## Exactly Once + Ordered

Данный код реализует протокол передачи сообщений "ровно один раз", но с добавленной гарантией упорядоченной доставки.

### 1. ExactlyOnceOrderedSender (Упорядоченный передатчик)
- **`__init__`**: Инициализация идентификаторов процесса и получателя, очереди, словаря отправленных сообщений и индекса сообщения.
- **`on_local_message`**: При получении локального сообщения для отправки, если нет отправленных, но еще не подтвержденных сообщений, отправляет сообщение получателю. В противном случае, помещает сообщение в очередь.
- **`on_message`**: При получении подтверждения о доставке, удаляет соответствующее сообщение из словаря отправленных. Если словарь пуст и в очереди есть сообщения, отправляет следующее сообщение из очереди.
- **`on_timer`**: Если сообщение не было подтверждено вовремя, передатчик повторно отправляет его.

### 2. ExactlyOnceOrderedReceiver (Упорядоченный получатель)
- **`__init__`**: Инициализация идентификатора процесса и буфера для хранения статуса обработанных сообщений.
- **`on_message`**: При получении сообщения от передатчика, отправляет подтверждение о доставке обратно. Если сообщение еще не было обработано, передает его локальному пользователю.

### Итого:
Протокол гарантирует, что каждое сообщение будет обработано получателем только один раз и в порядке, в котором были отправлены сообщения. Для этого мы используем механизм подтверждений, механизм для отслеживания обработанных сообщений и введение очереди сообщений для упорядочивания.
