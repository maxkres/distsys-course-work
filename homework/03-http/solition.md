# HTTP-сервер для работы с файлами

Этот HTTP-сервер предоставляет API для работы с файлами на сервере. Сервер принимает запросы с указанием `{url}`, где `{url}` представляет собой путь к файлу относительно рабочей директории.

## Методы

### GET {url}

**Описание**: Возвращает файл, находящийся по пути `{url}`, считая от `working-directory`. Если путь является директорией, то сервер возвращает таблицу всех файлов внутри директории в формате вывода `ls -lA` на Linux.

**Пример успешного ответа (файл)**:
```
HTTP/1.1 200 OK
Content-Type: application/octet-stream
Content-Length: 12345
```

**Пример успешного ответа (директория)**:
```
HTTP/1.1 200 OK
Content-Type: text/plain
Content-Length: 123

dr-xr-xr-x user user 100 2023-09-01 12:34:00 directory_name
-rwxr--r-- user user 100 2023-09-01 12:36:00 filename
```

**Пример ошибки (файл не найден)**:
```
HTTP/1.1 404 Not Found
Content-Type: text/plain
Content-Length: 19

File not found: {url}
```

### POST {url}

**Описание**: Создает новый файл на сервере по пути `{url}`, считая от `working-directory`. Данные файла передаются в теле запроса. Если передан заголовок `Create-Directory: True`, то сервер создает директорию по указанному пути.

**Пример успешного ответа (файл создан)**:
```
HTTP/1.1 201 Created
Content-Type: text/plain
Content-Length: 27

File created successfully: {url}
```

**Пример ошибки (файл уже существует)**:
```
HTTP/1.1 409 Conflict
Content-Type: text/plain
Content-Length: 26

File already exists: {url}
```

### PUT {url}

**Описание**: Обновляет содержимое файла по пути `{url}`, считая от `working-directory`. Новые данные файла передаются в теле запроса.

**Пример успешного ответа (файл обновлен)**:
```
HTTP/1.1 200 OK
Content-Type: text/plain
Content-Length: 28

File updated successfully: {url}
```

**Пример ошибки (путь является директорией)**:
```
HTTP/1.1 409 Conflict
Content-Type: text/plain
Content-Length: 29

Cannot update a directory: {url}
```

### DELETE {url}

**Описание**: Удаляет файл по пути `{url}`, считая от `working-directory`. Если путь является директорией и в заголовках не указан заголовок `Remove-Directory`, то сервер возвращает ответ 406. При успешном удалении файла сервер возвращает ответ 200.

**Пример успешного ответа (файл удален)**:
```
HTTP/1.1 200 OK
Content-Type: text/plain
Content-Length: 24

File deleted successfully: {url}
```

**Пример ошибки (путь является директорией и отсутствует заголовок `Remove-Directory`)**:
```
HTTP/1.1 406 Not Acceptable
Content-Type: text/plain
Content-Length: 38

Cannot delete a directory without permission: {url}
```

Вот переписанный раздел "Заголовки" для вашего README:

---

## Заголовки

При взаимодействии между клиентом и сервером должны поддерживаться следующие HTTP-заголовки:

| Заголовок          | Допустимые значения | Использование | Описание                                                                                                                                                                                                      |
|--------------------|----------------------|---------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `Host`             | Любой валидный домен | Клиент        | Клиент отправляет заголовок `Host` с каждым запросом к серверу. Если параметр `server-domain`, указанный при запуске сервера, не совпадает с заголовком `Host`, сервер вернет код ответа 400 (Неверный запрос). |
| `Content-Length`   | Число                | Сервер        | Этот заголовок указывает на общее количество байт в ответе сервера.                                                                                                                                                     |
| `Content-Type`     | MIME-тип             | Сервер        | Заголовок `Content-Type` определяет MIME-тип контента, который возвращается сервером. Для листинга директории можно использовать `text/plain` или `text/html`, а для остальных файлов - соответствующий MIME-тип.                |
| `Content-Encoding` | `gzip`               | Сервер        | Заголовок `Content-Encoding` указывает, что данные ответа сжаты с использованием указанного алгоритма сжатия. Если алгоритм не указан, данные считаются несжатыми.                                                        |
| `Accept-Encoding`  | `gzip`               | Клиент        | Заголовок `Accept-Encoding` позволяет клиенту указать, что он готов принимать данные, сжатые указанным алгоритмом сжатия. Если заголовок не указан, сервер будет предоставлять данные без сжатия.                       |
| `Create-Directory` | `True`, `False`      | Клиент        | Если клиент отправляет запрос методом `POST` и указывает заголовок `Create-Directory: True`, то сервер создаст директорию по указанному пути, если она не существует.                                        |
| `Server`           | Строка               | Сервер        | Заголовок `Server` содержит название вашего сервера.                                                                                                                                                                 |
| `Remove-Directory` | `True`, `False`      | Клиент        | Указание заголовка `Remove-Directory: True` позволяет системе полностью удалить директорию. Если заголовок не указан или установлен в `False`, сервер будет игнорировать запросы на удаление директорий.                     |

Эти заголовки облегчают взаимодействие между клиентом и сервером и помогают в обработке различных сценариев запросов и ответов.